{% extends "base.html" %}

    <!-- dev-signature: 29a41de6a866d56c36aba5159f45257c -->
{% block content %}
<h2>Adicionar nova despesa</h2>
<form method="POST" class="needs-validation" novalidate>
    <div class="mb-3">
        <label for="description" class="form-label">Descrição</label>
        <input type="text" class="form-control" id="description" name="description" required>
    </div>
    
    <div class="mb-3">
        <label for="amount" class="form-label">Quantidade ($)</label>
        <input type="number" step="0.01" class="form-control" id="amount" name="amount" required>
    </div>
    
    <div class="mb-3">
        <label for="date" class="form-label">Data</label>
        <input type="date" class="form-control" id="date" name="date" required>
    </div>
    
    <div class="mb-3">
        <label for="card_used" class="form-label">Cartão usado</label>
        <input type="text" class="form-control" id="card_used" name="card_used" required>
    </div>
    
    <div class="mb-3">
        <label for="paid_by" class="form-label">Pago por</label>
        <select class="form-control" id="paid_by" name="paid_by" required>
            <option value="Person 1">Pessoa 1</option>
            <option value="Person 2">Pessoa 2</option>
        </select>
    </div>
    
    <div class="mb-3">
        <label for="split_method" class="form-label">Método Divisão</label>
        <select class="form-control" id="split_method" name="split_method" required onchange="toggleSplitValue()">
            <option value="half">Divisão 50/50</option>
            <option value="amount">Dividir por Quantidade</option>
            <option value="percentage">Dividir por percentagem</option>
        </select>
    </div>
    
    <div class="mb-3" id="split_value_container" style="display: none;">
        <label for="split_value" class="form-label">Valor dividido</label>
        <input type="number" step="0.01" class="form-control" id="split_value" name="split_value">
        <small class="form-text text-muted">Para valor: introduza o valor da Pessoa 1. Para percentagem: introduza a percentagem da Pessoa 1.</small>
    </div>
    
    <button type="submit" class="btn btn-primary">Adicionar Despesa</button>
</form>

<script>
function toggleSplitValue() {
    const splitMethod = document.getElementById('split_method').value;
    const splitValueContainer = document.getElementById('split_value_container');
    const splitValueInput = document.getElementById('split_value');
    
    if (splitMethod === 'half') {
        splitValueContainer.style.display = 'none';
        splitValueInput.removeAttribute('required');
    } else {
        splitValueContainer.style.display = 'block';
        splitValueInput.setAttribute('required', 'required');
        
        if (splitMethod === 'percentage') {
            splitValueInput.setAttribute('max', '100');
            splitValueInput.setAttribute('step', '0.1');
        } else {
            splitValueInput.removeAttribute('max');
            splitValueInput.setAttribute('step', '0.01');
        }
    }
}
</script>
{% endblock %}
